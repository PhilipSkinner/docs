{
  "swagger": "2.0",
  "info": {
    "version": "v1",
    "title": "Fee Payment API"
  },
  "paths": {
    "/feeSchedule/{scheduleId}": {
      "get": {
        "tags": [
          "FeePaymentSchedule"
        ],
        "operationId": "Index",
        "consumes": [],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": false,
            "type": "string",
            "default": "Bearer "
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SimpleObjectExample[ResourceBase[FeeScheduleAttributes]]"
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          },
          "422": {
            "description": "Client Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          }
        }
      },
      "put": {
        "summary": "",
        "operationId": "put-feeSchedule-id",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-feeSchedule-id",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "parameters": [
        {
          "type": "string",
          "name": "scheduleId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/feeSchedule/{scheduleId}/facility": {
      "get": {
        "tags": [
          "FeePaymentSchedule"
        ],
        "operationId": "GetFacilityRequest",
        "consumes": [],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": false,
            "type": "string",
            "default": "Bearer "
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SimpleObjectExample[ResourceBase[FacilityRequestAttributes]]"
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          },
          "422": {
            "description": "Client Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          }
        }
      },
      "put": {
        "summary": "",
        "operationId": "put-feeSchedule-id-facility",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "parameters": [
        {
          "type": "string",
          "name": "scheduleId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/feeSchedule/{scheduleId}/events": {
      "get": {
        "tags": [
          "FeePaymentSchedule"
        ],
        "operationId": "GetScheduleEvents",
        "consumes": [],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": false,
            "type": "string",
            "default": "Bearer "
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SimpleObjectExample[List[ResourceBase[EventAttributes]]]"
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          },
          "422": {
            "description": "Client Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          }
        }
      },
      "post": {
        "summary": "",
        "operationId": "post-feeSchedule-id-events",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "parameters": [
        {
          "type": "string",
          "name": "scheduleId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/feeSchedule/{scheduleId}/events/{eventId}": {
      "get": {
        "tags": [
          "FeePaymentSchedule"
        ],
        "operationId": "GetScheduleEvents",
        "consumes": [],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "eventId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": false,
            "type": "string",
            "default": "Bearer "
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SimpleObjectExample[ResourceBase[EventAttributes]]"
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          },
          "422": {
            "description": "Client Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          }
        }
      },
      "put": {
        "summary": "",
        "operationId": "put-feeSchedule-id-events-eventId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-feeSchedule-id-events-eventId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "parameters": [
        {
          "type": "string",
          "name": "scheduleId",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "eventId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/feeSchedule/{scheduleId}/fees": {
      "get": {
        "tags": [
          "FeePaymentSchedule"
        ],
        "operationId": "GetScheduleFees",
        "consumes": [],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": false,
            "type": "string",
            "default": "Bearer "
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SimpleObjectExample[List[ResourceBase[FeeAttributes]]]"
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          },
          "422": {
            "description": "Client Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          }
        }
      },
      "post": {
        "summary": "",
        "operationId": "post-feeSchedule-id-fees",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "parameters": [
        {
          "type": "string",
          "name": "scheduleId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/feeSchedule/{scheduleId}/fees/{feeId}": {
      "get": {
        "tags": [
          "FeePaymentSchedule"
        ],
        "operationId": "GetScheduleFees",
        "consumes": [],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "name": "scheduleId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "feeId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": false,
            "type": "string",
            "default": "Bearer "
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SimpleObjectExample[ResourceBase[FeeAttributes]]"
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          },
          "422": {
            "description": "Client Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          }
        }
      },
      "put": {
        "summary": "",
        "operationId": "put-feeSchedule-id-fees-feeId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-feeSchedule-id-fees-feeId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "parameters": [
        {
          "type": "string",
          "name": "scheduleId",
          "in": "path",
          "required": true
        },
        {
          "type": "string",
          "name": "feeId",
          "in": "path",
          "required": true
        }
      ]
    },
    "/feeSchedule": {
      "post": {
        "tags": [
          "FeePaymentSchedule"
        ],
        "operationId": "CreateFeePayment",
        "consumes": [
          "application/json-patch+json",
          "application/json",
          "text/json",
          "application/*+json"
        ],
        "produces": [
          "text/plain",
          "application/json",
          "text/json"
        ],
        "parameters": [
          {
            "name": "fee",
            "in": "body",
            "required": false,
            "schema": {
              "$ref": "#/definitions/FeeRequest"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "description": "Bearer token",
            "required": false,
            "type": "string",
            "default": "Bearer "
          }
        ],
        "responses": {
          "422": {
            "description": "Client Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          },
          "500": {
            "description": "Server Error",
            "schema": {
              "$ref": "#/definitions/ErrorExample"
            }
          }
        }
      },
      "get": {
        "summary": "",
        "operationId": "get-feeSchedule",
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "meta": {
                  "$ref": "../models/paginationMeta.v1.json"
                },
                "data": {
                  "type": "array",
                  "items": {
                    "$ref": "#/definitions/SimpleObjectExample[ResourceBase[FeeScheduleAttributes]]"
                  }
                },
                "links": {
                  "$ref": "../models/paginationLinks.v1.json"
                }
              }
            }
          }
        },
        "description": "Links to mandate Id"
      }
    },
    "/mandates": {
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "meta": {
                  "$ref": "../models/paginationMeta.v1.json"
                },
                "links": {
                  "$ref": "../models/paginationLinks.v1.json"
                },
                "data": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "type": {
                        "type": "string"
                      },
                      "id": {
                        "type": "string"
                      },
                      "attributes": {
                        "type": "object",
                        "properties": {
                          "sortCode": {
                            "type": "string"
                          },
                          "accountNumber": {
                            "type": "string"
                          },
                          "externalId": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "operationId": "get-mandates",
        "description": "Throws 422 when lender does not have an API key set."
      },
      "post": {
        "summary": "",
        "operationId": "post-mandates",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/mandates/{mandateId}": {
      "parameters": [
        {
          "type": "string",
          "name": "mandateId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "type": {
                      "type": "string"
                    },
                    "attributes": {
                      "type": "object",
                      "properties": {
                        "status": {
                          "type": "string",
                          "enum": [
                            "new",
                            "pending",
                            "failed",
                            "amend",
                            "resubmit",
                            "cancel",
                            "cancelled",
                            "deleted",
                            "live"
                          ]
                        },
                        "history": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "date": {
                                "type": "string"
                              },
                              "eventType": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string"
                              },
                              "status": {
                                "type": "string"
                              }
                            }
                          }
                        },
                        "lastChecked": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "operationId": "get-mandates-mandateId"
      },
      "put": {
        "summary": "",
        "operationId": "put-mandates-mandateId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-mandates-mandateId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/lenders": {
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {},
        "operationId": "get-lenders"
      },
      "post": {
        "summary": "",
        "operationId": "post-lenders",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/lenders/{lenderId}": {
      "parameters": [
        {
          "type": "string",
          "name": "lenderId",
          "in": "path",
          "required": true
        }
      ],
      "get": {
        "summary": "Your GET endpoint",
        "tags": [],
        "responses": {},
        "operationId": "get-lenders-lenderId"
      },
      "put": {
        "summary": "",
        "operationId": "put-lenders-lenderId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "delete": {
        "summary": "",
        "operationId": "delete-lenders-lenderId",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    }
  },
  "definitions": {
    "ErrorExample": {
      "type": "object",
      "properties": {
        "errors": {
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/APIError"
          }
        }
      }
    },
    "APIError": {
      "type": "object",
      "properties": {
        "status": {
          "format": "int32",
          "enum": [
            100,
            101,
            102,
            103,
            200,
            201,
            202,
            203,
            204,
            205,
            206,
            207,
            208,
            226,
            300,
            300,
            301,
            301,
            302,
            302,
            303,
            303,
            304,
            305,
            306,
            307,
            307,
            308,
            400,
            401,
            402,
            403,
            404,
            405,
            406,
            407,
            408,
            409,
            410,
            411,
            412,
            413,
            414,
            415,
            416,
            417,
            421,
            422,
            423,
            424,
            426,
            428,
            429,
            431,
            451,
            500,
            501,
            502,
            503,
            504,
            505,
            506,
            507,
            508,
            510,
            511
          ],
          "type": "integer"
        },
        "source": {
          "$ref": "#/definitions/SourceInformation"
        },
        "title": {
          "type": "string"
        },
        "detail": {
          "type": "string"
        }
      }
    },
    "SourceInformation": {
      "type": "object",
      "properties": {
        "pointer": {
          "type": "string"
        },
        "parameter": {
          "type": "string"
        }
      }
    },
    "SimpleObjectExample[ResourceBase[FeeScheduleAttributes]]": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/ResourceBase[FeeScheduleAttributes]"
        },
        "links": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "meta": {
          "$ref": "../models/individualMeta.v1.json"
        }
      }
    },
    "ResourceBase[FeeScheduleAttributes]": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "attributes": {
          "$ref": "#/definitions/FeeScheduleAttributes"
        },
        "relationships": {
          "type": "object",
          "additionalProperties": {
            "uniqueItems": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/Relationship"
            }
          },
          "properties": {
            "mandate": {
              "$ref": "../models/objectPointer.v1.json"
            }
          }
        },
        "scheduleId": {
          "type": "string"
        }
      },
      "description": ""
    },
    "FeeScheduleAttributes": {
      "type": "object",
      "properties": {
        "submissionId": {
          "format": "uuid",
          "type": "string"
        }
      }
    },
    "Relationship": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "scheduleId": {
          "type": "string"
        }
      }
    },
    "SimpleObjectExample[ResourceBase[FacilityRequestAttributes]]": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/ResourceBase[FacilityRequestAttributes]"
        },
        "links": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "properties": {
            "self": {
              "type": "string"
            },
            "feeSchedule": {
              "type": "string"
            }
          }
        },
        "meta": {
          "$ref": "../models/individualMeta.v1.json"
        }
      }
    },
    "ResourceBase[FacilityRequestAttributes]": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "attributes": {
          "$ref": "#/definitions/FacilityRequestAttributes"
        },
        "relationships": {
          "type": "object",
          "additionalProperties": {
            "uniqueItems": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/Relationship"
            }
          }
        },
        "scheduleId": {
          "type": "string"
        }
      }
    },
    "FacilityRequestAttributes": {
      "type": "object",
      "properties": {
        "endDate": {
          "format": "date-time",
          "type": "string"
        },
        "startDate": {
          "format": "date-time",
          "type": "string"
        },
        "lenderId": {
          "format": "uuid",
          "type": "string"
        },
        "submissionId": {
          "format": "uuid",
          "type": "string"
        }
      }
    },
    "SimpleObjectExample[List[ResourceBase[EventAttributes]]]": {
      "type": "object",
      "properties": {
        "data": {
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/ResourceBase[EventAttributes]"
          }
        },
        "links": {
          "$ref": "../models/paginationLinks.v1.json"
        },
        "meta": {
          "$ref": "../models/paginationMeta.v1.json"
        }
      }
    },
    "ResourceBase[EventAttributes]": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "attributes": {
          "$ref": "#/definitions/EventAttributes"
        },
        "relationships": {
          "type": "object",
          "additionalProperties": {
            "uniqueItems": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/Relationship"
            }
          }
        },
        "scheduleId": {
          "type": "string"
        }
      }
    },
    "EventAttributes": {
      "type": "object",
      "properties": {
        "date": {
          "format": "date-time",
          "type": "string"
        },
        "amount": {
          "format": "double",
          "type": "number"
        },
        "annotation": {
          "type": "string"
        }
      }
    },
    "SimpleObjectExample[ResourceBase[EventAttributes]]": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/ResourceBase[EventAttributes]"
        },
        "links": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "properties": {
            "self": {
              "type": "string"
            },
            "events": {
              "type": "string"
            },
            "feeSchedule": {
              "type": "string"
            }
          }
        },
        "meta": {
          "$ref": "../models/individualMeta.v1.json"
        }
      }
    },
    "SimpleObjectExample[List[ResourceBase[FeeAttributes]]]": {
      "type": "object",
      "properties": {
        "data": {
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/ResourceBase[FeeAttributes]"
          }
        },
        "links": {
          "$ref": "../models/paginationMeta.v1.json"
        },
        "meta": {
          "$ref": "../models/paginationMeta.v1.json"
        }
      }
    },
    "ResourceBase[FeeAttributes]": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "attributes": {
          "$ref": "#/definitions/FeeAttributes"
        },
        "relationships": {
          "type": "object",
          "additionalProperties": {
            "uniqueItems": false,
            "type": "array",
            "items": {
              "$ref": "#/definitions/Relationship"
            }
          }
        },
        "scheduleId": {
          "type": "string"
        }
      }
    },
    "FeeAttributes": {
      "type": "object",
      "description": "",
      "properties": {
        "balance": {
          "format": "double",
          "type": "number"
        },
        "date": {
          "format": "date-time",
          "type": "string"
        },
        "amount": {
          "format": "double",
          "type": "number"
        },
        "status": {
          "type": "string",
          "enum": [
            "pending",
            "requested",
            "received",
            "failure",
            "retried"
          ]
        },
        "history": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "date": {
                "type": "string"
              },
              "eventType": {
                "type": "string"
              },
              "description": {
                "type": "string"
              },
              "status": {
                "type": "string"
              }
            }
          }
        },
        "lastChecked": {
          "type": "string"
        },
        "amountPaid": {
          "type": "number"
        },
        "paidDate": {
          "type": "string"
        }
      }
    },
    "SimpleObjectExample[ResourceBase[FeeAttributes]]": {
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/ResourceBase[FeeAttributes]"
        },
        "meta": {
          "$ref": "../models/individualMeta.v1.json"
        },
        "links": {
          "type": "object",
          "properties": {
            "self": {
              "type": "string"
            },
            "fees": {
              "type": "string"
            },
            "feeSchedule": {
              "type": "string"
            }
          }
        }
      }
    },
    "FeeRequest": {
      "type": "object",
      "properties": {
        "facility": {
          "$ref": "#/definitions/FacilityRequest"
        },
        "events": {
          "uniqueItems": false,
          "type": "array",
          "items": {
            "$ref": "#/definitions/EventRequest"
          }
        },
        "scheduleId": {
          "type": "string"
        },
        "requestedOn": {
          "type": "string"
        }
      }
    },
    "FacilityRequest": {
      "type": "object",
      "properties": {
        "submissionId": {
          "type": "string"
        },
        "lenderId": {
          "type": "string"
        },
        "startDate": {
          "type": "string"
        },
        "endDate": {
          "type": "string"
        }
      }
    },
    "EventRequest": {
      "type": "object",
      "properties": {
        "date": {
          "type": "string"
        },
        "amount": {
          "format": "double",
          "type": "number"
        },
        "annotation": {
          "type": "string"
        }
      }
    }
  }
}